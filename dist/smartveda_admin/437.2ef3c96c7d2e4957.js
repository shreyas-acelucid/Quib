"use strict";(self.webpackChunkAdmin_Panel=self.webpackChunkAdmin_Panel||[]).push([[437],{5437:(ie,W,m)=>{m.r(W),m.d(W,{SettingModule:()=>Xt});var v=m(9808),j=m(4521),C=m(5861),M=m(8441),t=m(5e3),R=m(9996),O=m(7650),z=m(9783),I=m(7398),u=m(3075),D=m(5315);function A(r,s,e,i){return new(e||(e=Promise))(function(n,a){function c(p){try{l(i.next(p))}catch(g){a(g)}}function h(p){try{l(i.throw(p))}catch(g){a(g)}}function l(p){p.done?n(p.value):function o(n){return n instanceof e?n:new e(function(a){a(n)})}(p.value).then(c,h)}l((i=i.apply(r,s||[])).next())})}var V=m(2313),lt=m(2722),ht=m(590),G=m(6451),H=m(4968);const pt=["wrapper"],dt=["sourceImage"];function gt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"img",4,5),t.NdJ("load",function(){return t.CHM(e),t.oxw().imageLoadedInView()})("mousedown",function(o){t.CHM(e);const n=t.oxw();return n.startMove(o,n.moveTypes.Drag)})("touchstart",function(o){t.CHM(e);const n=t.oxw();return n.startMove(o,n.moveTypes.Drag)})("error",function(o){return t.CHM(e),t.oxw().loadImageError(o)}),t.qZA()}if(2&r){const e=t.oxw();t.Udp("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),t.ekj("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),t.Q6J("src",e.safeImgDataUrl,t.LSH),t.uIk("alt",e.imageAltText)}}function mt(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",9),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"topleft")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"topleft")}),t._UZ(2,"span",10),t.qZA(),t.TgZ(3,"span",11),t._UZ(4,"span",10),t.qZA(),t.TgZ(5,"span",12),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"topright")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"topright")}),t._UZ(6,"span",10),t.qZA(),t.TgZ(7,"span",13),t._UZ(8,"span",10),t.qZA(),t.TgZ(9,"span",14),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottomright")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottomright")}),t._UZ(10,"span",10),t.qZA(),t.TgZ(11,"span",15),t._UZ(12,"span",10),t.qZA(),t.TgZ(13,"span",16),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottomleft")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottomleft")}),t._UZ(14,"span",10),t.qZA(),t.TgZ(15,"span",17),t._UZ(16,"span",10),t.qZA(),t.TgZ(17,"span",18),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"top")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"top")}),t.qZA(),t.TgZ(18,"span",19),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"right")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"right")}),t.qZA(),t.TgZ(19,"span",20),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottom")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"bottom")}),t.qZA(),t.TgZ(20,"span",21),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"left")})("touchstart",function(o){t.CHM(e);const n=t.oxw(2);return n.startMove(o,n.moveTypes.Resize,"left")}),t.qZA(),t.BQk()}}function ut(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("keydown",function(o){return t.CHM(e),t.oxw().keyboardAccess(o)}),t.TgZ(1,"div",7),t.NdJ("mousedown",function(o){t.CHM(e);const n=t.oxw();return n.startMove(o,n.moveTypes.Move)})("touchstart",function(o){t.CHM(e);const n=t.oxw();return n.startMove(o,n.moveTypes.Move)}),t.qZA(),t.YNc(2,mt,21,0,"ng-container",8),t.qZA()}if(2&r){const e=t.oxw();t.Udp("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left","center"===e.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),t.ekj("ngx-ic-round",e.roundCropper),t.uIk("aria-label",e.cropperFrameAriaLabel),t.xp6(2),t.Q6J("ngIf",!e.hideResizeSquares)}}class ft{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(e=>e in this).forEach(e=>this[e]=s[e]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(e=>e in this).forEach(e=>this[e]=s[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var _=(()=>{return(r=_||(_={})).Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",_;var r})();function X(r,s){return r/100*s}let Ct=(()=>{class r{crop(e,i,o,n,a){const c=this.getImagePosition(e,i,o,a),h=c.x2-c.x1,l=c.y2-c.y1,p=document.createElement("canvas");p.width=h,p.height=l;const g=p.getContext("2d");if(!g)return null;null!=o.backgroundColor&&(g.fillStyle=o.backgroundColor,g.fillRect(0,0,h,l));const d=(o.transform.scale||1)*(o.transform.flipH?-1:1),f=(o.transform.scale||1)*(o.transform.flipV?-1:1),{translateH:b,translateV:T}=this.getCanvasTranslate(e,o,a),w=e.transformed;g.setTransform(d,0,0,f,w.size.width/2+b,w.size.height/2+T),g.translate(-c.x1/d,-c.y1/f),g.rotate((o.transform.rotate||0)*Math.PI/180),g.drawImage(w.image,-w.size.width/2,-w.size.height/2);const y={width:h,height:l,imagePosition:c,cropperPosition:Object.assign({},i)};o.containWithinAspectRatio&&(y.offsetImagePosition=this.getOffsetImagePosition(e,i,o,a));const x=this.getResizeRatio(h,l,o);return 1!==x&&(y.width=Math.round(h*x),y.height=o.maintainAspectRatio?Math.round(y.width/o.aspectRatio):Math.round(l*x),function bt(r,s,e){const i=r.width,o=r.height,n=i/(s=Math.round(s)),a=o/(e=Math.round(e)),c=Math.ceil(n/2),h=Math.ceil(a/2),l=r.getContext("2d");if(l){const p=l.getImageData(0,0,i,o),g=l.createImageData(s,e),d=p.data,f=g.data;for(let b=0;b<e;b++)for(let T=0;T<s;T++){const w=4*(T+b*s),y=b*a;let x=0,q=0,tt=0,et=0,it=0,ot=0,nt=0;const $t=Math.floor(T*n),Kt=Math.floor(b*a);let L=Math.ceil((T+1)*n),J=Math.ceil((b+1)*a);L=Math.min(L,i),J=Math.min(J,o);for(let k=Kt;k<J;k++){const rt=Math.abs(y-k)/h,te=T*n,ee=rt*rt;for(let U=$t;U<L;U++){const at=Math.abs(te-U)/c,S=Math.sqrt(ee+at*at);if(S>=1)continue;x=2*S*S*S-3*S*S+1;const Z=4*(U+k*i);nt+=x*d[Z+3],tt+=x,d[Z+3]<255&&(x=x*d[Z+3]/250),et+=x*d[Z],it+=x*d[Z+1],ot+=x*d[Z+2],q+=x}}f[w]=et/q,f[w+1]=it/q,f[w+2]=ot/q,f[w+3]=nt/tt}r.width=s,r.height=e,l.putImageData(g,0,0)}}(p,y.width,y.height)),"blob"===n?this.cropToBlob(y,p,o):(y.base64=p.toDataURL("image/"+o.format,this.getQuality(o)),y)}cropToBlob(e,i,o){return A(this,void 0,void 0,function*(){return e.blob=yield new Promise(n=>i.toBlob(n,"image/"+o.format,this.getQuality(o))),e.blob&&(e.objectUrl=URL.createObjectURL(e.blob)),e})}getCanvasTranslate(e,i,o){if("px"===i.transform.translateUnit){const n=this.getRatio(e,o);return{translateH:(i.transform.translateH||0)*n,translateV:(i.transform.translateV||0)*n}}return{translateH:i.transform.translateH?X(i.transform.translateH,e.transformed.size.width):0,translateV:i.transform.translateV?X(i.transform.translateV,e.transformed.size.height):0}}getRatio(e,i){return e.transformed.size.width/i.width}getImagePosition(e,i,o,n){const a=this.getRatio(e,n),c={x1:Math.round(i.x1*a),y1:Math.round(i.y1*a),x2:Math.round(i.x2*a),y2:Math.round(i.y2*a)};return o.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,e.transformed.size.width),c.y2=Math.min(c.y2,e.transformed.size.height)),c}getOffsetImagePosition(e,i,o,n){const a=o.canvasRotation+e.exifTransform.rotate,c=this.getRatio(e,n);let h,l;a%2?(h=(e.transformed.size.width-e.original.size.height)/2,l=(e.transformed.size.height-e.original.size.width)/2):(h=(e.transformed.size.width-e.original.size.width)/2,l=(e.transformed.size.height-e.original.size.height)/2);const p={x1:Math.round(i.x1*c)-h,y1:Math.round(i.y1*c)-l,x2:Math.round(i.x2*c)-h,y2:Math.round(i.y2*c)-l};return o.containWithinAspectRatio||(p.x1=Math.max(p.x1,0),p.y1=Math.max(p.y1,0),p.x2=Math.min(p.x2,e.transformed.size.width),p.y2=Math.min(p.y2,e.transformed.size.height)),p}getResizeRatio(e,i,o){const n=o.resizeToWidth/e,a=o.resizeToHeight/i,c=new Array;o.resizeToWidth>0&&c.push(n),o.resizeToHeight>0&&c.push(a);const h=0===c.length?1:Math.min(...c);return h>1&&!o.onlyScaleDown?h:Math.min(h,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),yt=(()=>{class r{resetCropperPosition(e,i,o,n){if(null==e?void 0:e.nativeElement)if(o.cropperStaticHeight&&o.cropperStaticWidth)i.x1=0,i.x2=n.width>o.cropperStaticWidth?o.cropperStaticWidth:n.width,i.y1=0,i.y2=n.height>o.cropperStaticHeight?o.cropperStaticHeight:n.height;else{const a=Math.min(o.cropperScaledMaxWidth,n.width),c=Math.min(o.cropperScaledMaxHeight,n.height);if(o.maintainAspectRatio)if(n.width/o.aspectRatio<n.height){i.x1=0,i.x2=a;const h=a/o.aspectRatio;i.y1=(n.height-h)/2,i.y2=i.y1+h}else{i.y1=0,i.y2=c;const h=c*o.aspectRatio;i.x1=(n.width-h)/2,i.x2=i.x1+h}else i.x1=0,i.x2=a,i.y1=0,i.y2=c}}move(e,i,o){const n=this.getClientX(e)-i.clientX,a=this.getClientY(e)-i.clientY;o.x1=i.x1+n,o.y1=i.y1+a,o.x2=i.x2+n,o.y2=i.y2+a}resize(e,i,o,n,a){const c=this.getClientX(e)-i.clientX,h=this.getClientY(e)-i.clientY;switch(i.position){case"left":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth);break;case"topleft":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y1=Math.min(Math.max(i.y1+h,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"top":o.y1=Math.min(Math.max(i.y1+h,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"topright":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y1=Math.min(Math.max(i.y1+h,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"right":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth);break;case"bottomright":o.x2=Math.max(Math.min(i.x2+c,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y2=Math.max(Math.min(i.y2+h,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottom":o.y2=Math.max(Math.min(i.y2+h,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottomleft":o.x1=Math.min(Math.max(i.x1+c,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y2=Math.max(Math.min(i.y2+h,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"center":const l=e.scale,p=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*l),a.cropperScaledMaxWidth),g=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*l),a.cropperScaledMaxHeight);o.x1=i.clientX-p/2,o.x2=i.clientX+p/2,o.y1=i.clientY-g/2,o.y2=i.clientY+g/2,o.x1<0?(o.x2-=o.x1,o.x1=0):o.x2>n.width&&(o.x1-=o.x2-n.width,o.x2=n.width),o.y1<0?(o.y2-=o.y1,o.y1=0):o.y2>n.height&&(o.y1-=o.y2-n.height,o.y2=n.height)}a.maintainAspectRatio&&this.checkAspectRatio(i.position,o,n,a)}checkAspectRatio(e,i,o,n){let a=0,c=0;switch(e){case"top":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/n.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x1+=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(0-i.y1,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y1+=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio,a=Math.max(i.x2-o.width,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x2-=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio,a=Math.max(0-i.x1,0),c=Math.max(i.y2-o.height,0),(a>0||c>0)&&(i.x1+=c*n.aspectRatio>a?c*n.aspectRatio:a,i.y2-=c*n.aspectRatio>a?c:a/n.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*n.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/n.aspectRatio;const h=Math.max(0-i.x1,0),l=Math.max(i.x2-o.width,0),p=Math.max(i.y2-o.height,0),g=Math.max(0-i.y1,0);(h>0||l>0||p>0||g>0)&&(i.x1+=p*n.aspectRatio>h?p*n.aspectRatio:h,i.x2-=g*n.aspectRatio>l?g*n.aspectRatio:l,i.y1+=g*n.aspectRatio>l?g:l/n.aspectRatio,i.y2-=p*n.aspectRatio>h?p:h/n.aspectRatio)}}getClientX(e){var i;return(null===(i=e.touches)||void 0===i?void 0:i[0].clientX)||e.clientX||0}getClientY(e){var i;return(null===(i=e.touches)||void 0===i?void 0:i[0].clientY)||e.clientY||0}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();let St=(()=>{class r{constructor(){this.autoRotateSupported=function At(){return new Promise(r=>{const s=new Image;s.onload=()=>{r(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(e,i){return A(this,void 0,void 0,function*(){const o=yield e.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(o,e.type,i)})}checkImageTypeAndLoadImageFromArrayBuffer(e,i,o){return this.isValidImageType(i)?this.loadImageFromArrayBuffer(e,o,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,i){return A(this,void 0,void 0,function*(){const n=yield(yield fetch(e)).blob(),a=yield n.arrayBuffer();return yield this.loadImageFromArrayBuffer(a,i,n.type)})}loadBase64Image(e,i){const o=this.base64ToArrayBuffer(e);return this.loadImageFromArrayBuffer(o,i)}base64ToArrayBuffer(e){e=e.replace(/^data:([^;]+);base64,/gim,"");const i=atob(e),o=i.length,n=new Uint8Array(o);for(let a=0;a<o;a++)n[a]=i.charCodeAt(a);return n.buffer}loadImageFromArrayBuffer(e,i,o){return A(this,void 0,void 0,function*(){const n=yield new Promise((a,c)=>A(this,void 0,void 0,function*(){try{const h=new Blob([e],o?{type:o}:void 0),l=URL.createObjectURL(h),p=new Image,d="image/svg+xml"===o?yield this.getSvgImageSize(h):void 0;p.onload=()=>a({originalImage:p,originalImageSize:d,originalObjectUrl:l,originalArrayBuffer:e}),p.onerror=c,p.src=l}catch(h){c(h)}}));return yield this.transformImageFromArrayBuffer(n,i,null!=n.originalImageSize)})}getSvgImageSize(e){return A(this,void 0,void 0,function*(){const n=(new DOMParser).parseFromString(yield e.text(),"image/svg+xml").querySelector("svg");if(!n)throw Error("Failed to parse SVG image");const a=n.getAttribute("width"),c=n.getAttribute("height");if(a&&c)return null;const h=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(h){const l=h.split(" ");return{width:+l[2],height:+l[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(e,i,o=!1){var n;return A(this,void 0,void 0,function*(){const c=function Tt(r){switch("object"==typeof r&&(r=function wt(r){const s=new DataView(r);if(65496!==s.getUint16(0,!1))return-2;const e=s.byteLength;let i=2;for(;i<e;){if(s.getUint16(i+2,!1)<=8)return-1;const o=s.getUint16(i,!1);if(i+=2,65505==o){if(1165519206!==s.getUint32(i+=2,!1))return-1;const n=18761==s.getUint16(i+=6,!1);i+=s.getUint32(i+4,n);const a=s.getUint16(i,n);i+=2;for(let c=0;c<a;c++)if(274==s.getUint16(i+12*c,n))return s.getUint16(i+12*c+8,n)}else{if(65280!=(65280&o))break;i+=s.getUint16(i,!1)}}return-1}(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield this.autoRotateSupported)?-1:e.originalArrayBuffer);if(!e.originalImage||!e.originalImage.complete)return Promise.reject(new Error("No image loaded"));const h={original:{objectUrl:e.originalObjectUrl,image:e.originalImage,size:null!==(n=e.originalImageSize)&&void 0!==n?n:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:c};return this.transformLoadedImage(h,i,o)})}transformLoadedImage(e,i,o=!1){return A(this,void 0,void 0,function*(){const n=i.canvasRotation+e.exifTransform.rotate,a=e.original.size;if(!o&&0===n&&!e.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:Object.assign({},a)},transformed:{objectUrl:e.original.objectUrl,image:e.original.image,size:Object.assign({},a)},exifTransform:e.exifTransform};const c=this.getTransformedSize(a,e.exifTransform,i),h=document.createElement("canvas");h.width=c.width,h.height=c.height;const l=h.getContext("2d");null==l||l.setTransform(e.exifTransform.flip?-1:1,0,0,1,h.width/2,h.height/2),null==l||l.rotate(Math.PI*(n/2)),null==l||l.drawImage(e.original.image,-a.width/2,-a.height/2);const p=yield new Promise(f=>h.toBlob(f,i.format));if(!p)throw new Error("Failed to get Blob for transformed image.");const g=URL.createObjectURL(p),d=yield this.loadImageFromObjectUrl(g);return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:Object.assign({},a)},transformed:{objectUrl:g,image:d,size:{width:d.width,height:d.height}},exifTransform:e.exifTransform}})}loadImageFromObjectUrl(e){return new Promise((i,o)=>{const n=new Image;n.onload=()=>i(n),n.onerror=o,n.src=e})}getTransformedSize(e,i,o){const n=o.canvasRotation+i.rotate;if(o.containWithinAspectRatio){if(n%2){const c=e.height/o.aspectRatio;return{width:Math.max(e.height,e.width*o.aspectRatio),height:Math.max(e.width,c)}}{const c=e.width/o.aspectRatio;return{width:Math.max(e.width,e.height*o.aspectRatio),height:Math.max(e.height,c)}}}return n%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Zt=(()=>{class r{constructor(e,i,o,n,a,c,h){this.cropService=e,this.cropperPositionService=i,this.loadImageService=o,this.sanitizer=n,this.cd=a,this.zone=c,this.hammerLoader=h,this.settings=new ft,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=_,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new t.vpe,this.startCropImage=new t.vpe,this.imageLoaded=new t.vpe,this.cropperReady=new t.vpe,this.loadImageFailed=new t.vpe,this.transformChange=new t.vpe,this.reset()}ngOnChanges(e){var i;this.onChangesUpdateSettings(e),this.onChangesInputImage(e),(null===(i=this.loadedImage)||void 0===i?void 0:i.original.image.complete)&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!e.maintainAspectRatio&&!e.aspectRatio?e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition()),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var e,i,o;return(null===(o=null===(i=null===(e=this.imageChangedEvent)||void 0===e?void 0:e.target)||void 0===i?void 0:i.files)||void 0===o?void 0:o.length)>0}setCssTransform(){var e;const i=(null===(e=this.transform)||void 0===e?void 0:e.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${i}, ${this.transform.translateV||0}${i}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var e,i;return(null===(i=null===(e=this.sourceImage)||void 0===e?void 0:e.nativeElement)||void 0===i?void 0:i.offsetWidth)>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const e=Object.assign({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(e),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){var e;return A(this,void 0,void 0,function*(){yield null===(e=this.hammerLoader)||void 0===e?void 0:e.call(this);const i=(null==window?void 0:window.Hammer)||null;if(i){const o=new i(this.wrapper.nativeElement);o.get("pinch").set({enable:!0}),o.on("pinchmove",this.onPinch.bind(this)),o.on("pinchend",this.pinchStop.bind(this)),o.on("pinchstart",this.startPinch.bind(this))}else(0,t.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(e){(e.width!==this.maxSize.width||e.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/e.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/e.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/e.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/e.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){const i=+e.key;i>=1&&i<=9&&(this.settings.stepSize=i)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const o=e.shiftKey?_.Resize:_.Move,n=e.altKey?function xt(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(e.key):function _t(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(e.key),a=function vt(r,s){switch(r){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},o,n),this.handleMouseMove(a),this.handleMouseUp()}startMove(e,i,o=null){var n,a;this.disabled||(null===(n=this.moveStart)||void 0===n?void 0:n.active)&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===_.Pinch||i===_.Drag&&!this.allowMoveImage||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:i,position:o,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper),this.initMouseMove())}initMouseMove(){(0,G.T)((0,H.R)(document,"mousemove"),(0,H.R)(document,"touchmove")).pipe((0,lt.R)((0,G.T)((0,H.R)(document,"mouseup"),(0,H.R)(document,"touchend")).pipe((0,ht.P)()))).subscribe({next:e=>this.zone.run(()=>{this.handleMouseMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(e){!this.safeImgDataUrl||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:_.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(e){var i,o;if(this.moveStart.active)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===_.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===_.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===_.Drag){const n=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(i=this.moveStart.transform)||void 0===i?void 0:i.translateH)||0)+n,translateV:((null===(o=this.moveStart.transform)||void 0===o?void 0:o.translateV)||0)+a}),this.setCssTransform()}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===_.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){const e=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(e.width),this.maxSize.height=parseFloat(e.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var e,i;(null===(i=null===(e=this.loadedImage)||void 0===e?void 0:e.transformed)||void 0===i?void 0:i.image)?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var e,i;if(null===(i=null===(e=this.loadedImage)||void 0===e?void 0:e.transformed)||void 0===i?void 0:i.image){const o=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/o:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/o:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){var e;this.moveStart.active&&(this.moveStart.active=!1,(null===(e=this.moveStart)||void 0===e?void 0:e.type)===_.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(e=this.settings.output){var i,o;if(null!=(null===(o=null===(i=this.loadedImage)||void 0===i?void 0:i.transformed)||void 0===o?void 0:o.image)){if(this.startCropImage.emit(),"blob"===e)return this.cropToBlob();if("base64"===e)return this.cropToBase64()}return null}cropToBlob(){return new Promise((e,i)=>this.zone.run(()=>A(this,void 0,void 0,function*(){const o=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);o?(this.imageCropped.emit(o),e(o)):i("Crop image failed")})))}cropToBase64(){const e=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return e?(this.imageCropped.emit(e),e):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Ct),t.Y36(yt),t.Y36(St),t.Y36(V.H7),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(V.vm,8))},r.\u0275cmp=t.Xpm({type:r,selectors:[["image-cropper"]],viewQuery:function(e,i){if(1&e&&(t.Gf(pt,7),t.Gf(dt,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.wrapper=o.first),t.iGM(o=t.CRH())&&(i.sourceImage=o.first)}},hostVars:6,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7),2&e&&(t.Udp("text-align",i.alignImage),t.ekj("disabled",i.disabled)("ngx-ix-hidden",i.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[t.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,i){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,gt,2,8,"img",1),t._UZ(3,"div",2),t.YNc(4,ut,3,16,"div",3),t.qZA()),2&e&&(t.Udp("background",i.imageVisible&&i.backgroundColor),t.xp6(2),t.Q6J("ngIf",i.safeImgDataUrl),t.xp6(1),t.Udp("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left","center"===i.alignImage?i.marginLeft:null),t.xp6(1),t.Q6J("ngIf",i.imageVisible))},directives:[v.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),r})(),Rt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[v.ez]]}),r})();var F=m(845),Ot=m(9114);function It(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"div",22),t._UZ(2,"img",23),t.TgZ(3,"div",24),t.TgZ(4,"i",25),t.NdJ("click",function(o){const a=t.CHM(e).$implicit;return t.oxw().confirmdelete(o,a.avatarId)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit,i=t.oxw();t.xp6(2),t.Q6J("src",i.getFullImageUrl(e.avatarBase256ImagePath),t.LSH)}}const zt=function(){return{width:"50vw",height:"70vh"}},Et=function(){return{width:"40vw"}};let $=(()=>{class r{constructor(e,i,o,n){this.ngxLoader=e,this.QuibService=i,this.toastr=o,this.confirmationService=n,this.checked2=!0,this.allAvatars=[],this.serverBaseUrl="https://quibs.com/",this.display=!1,this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){this.sidebarSpacing="expanded",this.fgsType=M.aS.squareLoader,this.ngxLoader.start(),this.getAvatar()}confirmdelete(e,i){this.confirmationService.confirm({target:e.target,message:"Are you sure that you want to delete this  Avatar?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteAvatar(i)},reject:()=>{}})}getAvatar(){var e=this;return(0,C.Z)(function*(){e.ngxLoader.start(),(yield e.QuibService.getAvatar()).subscribe({next:i=>{e.allAvatars=i,e.ngxLoader.stop()},error:i=>{e.toastr.showError("Avatars could not be fetched","Error"),e.ngxLoader.stop()},complete:()=>{}})})()}getFullImageUrl(e){return this.serverBaseUrl+e}deleteAvatar(e){var i=this;return(0,C.Z)(function*(){(yield i.QuibService.deleteAvatar(e)).subscribe({next:o=>{i.getAvatar(),i.toastr.showSuccess("Avatar deleted successfully","Success")},error:o=>{i.toastr.showError("Failed to delete Avatar",""),console.log(o)},complete:()=>{}})})()}imageCropped(e){this.croppedImage=e.blob;const i=this.imageChangedEvent.target.files[0];this.image=new File([this.croppedImage],i.name,{type:i.type})}onChangeAvatar(e,i){this.image=e.target.files[0],this.imageChangedEvent=e,[".png",".jpeg",".jpg",".gif"].some(o=>this.image.name.endsWith(o))?this.display=!0:(this.resetForm(i),this.toastr.showWarning("Extension must be of type jpeg, jpg, png or gif ","Invalid File extension"))}addAvatar(e){var i=this;return(0,C.Z)(function*(){const o=new FormData;null!=i.image?(o.append("AvatarImage",i.image),(yield i.QuibService.addAvatar(o)).subscribe({next:a=>{i.getAvatar()},error:a=>{i.toastr.showError("Avatar Filename Already Exists","Duplicate Filename")},complete:()=>{i.resetForm(e)}})):i.toastr.showWarning("File cannot be empty","Cannot Add Avatar")})()}resetForm(e){e.value=null,this.image=null,this.display=!1}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.LA),t.Y36(R.V),t.Y36(O.$),t.Y36(z.YP))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-avatar"]],decls:27,vars:15,consts:[[3,"toggleSidebar"],[1,"body","bcard",3,"ngClass"],[1,"card","col-sm-12",2,"height","100vh"],[1,"row","gutters"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"h-100","mt-0"],[1,"card-body"],["name","AvatarForm"],[1,"col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],[1,"form-group"],["for","name",1,"txt-style"],["type","file","placeholder","avatar",1,"form-control",3,"change"],["fileinput",""],["header","Edit Avatar",3,"closable","visible","modal","visibleChange"],[3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped"],[1,"text-center"],["pButton","","type","button","id","reset","name","reset",1,"p-button-danger","mr-4",3,"click"],["pButton","","type","button","id","submit","name","submit",1,"p-button-success",3,"click"],[1,"txt-style"],["class","avatar",4,"ngFor","ngForOf"],["header","Confirmation","position","top","icon","pi pi-exclamation-triangle",3,"baseZIndex"],[1,"avatar"],[1,"image-div"],[3,"src"],[1,"overlay-text"],[1,"pi","pi-times",2,"color","red","font-weight","bolder",3,"click"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"app-header",0),t.NdJ("toggleSidebar",function(a){return i.onToggleSidebar(a)}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"form",7),t.TgZ(8,"div",3),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12,"Upload Image"),t.qZA(),t.TgZ(13,"input",11,12),t.NdJ("change",function(a){t.CHM(o);const c=t.MAs(14);return i.onChangeAvatar(a,c)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"p-dialog",13),t.NdJ("visibleChange",function(a){return i.display=a}),t.TgZ(16,"image-cropper",14),t.NdJ("imageCropped",function(a){return i.imageCropped(a)}),t.qZA(),t.TgZ(17,"div",15),t.TgZ(18,"button",16),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(14);return i.resetForm(a)}),t._uU(19," Cancel "),t.qZA(),t.TgZ(20,"button",17),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(14);return i.addAvatar(a)}),t._uU(21," Submit "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"p",18),t._uU(23,"List of All Avatar Images"),t.qZA(),t.TgZ(24,"div",3),t.YNc(25,It,5,1,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"p-confirmDialog",20),t.qZA()}2&e&&(t.xp6(1),t.Q6J("ngClass",i.sidebarSpacing),t.xp6(14),t.Akn(t.DdM(13,zt)),t.Q6J("closable",!1)("visible",i.display)("modal",!0),t.xp6(1),t.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1),t.xp6(9),t.Q6J("ngForOf",i.allAvatars),t.xp6(1),t.Akn(t.DdM(14,Et)),t.Q6J("baseZIndex",1e4))},directives:[I.G,v.mk,u._Y,u.JL,u.F,D.V,Zt,F.Hq,v.sg,Ot.Q],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:green}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px green}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.avatar[_ngcontent-%COMP%]{height:150px;border-radius:5px}.txt-style[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:18px}.image-div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:cover;width:100%;max-height:100%}.image-div[_ngcontent-%COMP%]{position:relative;cursor:pointer;height:100px;width:80px}.image-div[_ngcontent-%COMP%]:hover{background-color:#333}.image-div[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(50%)}.image-div[_ngcontent-%COMP%]:hover   .overlay-text[_ngcontent-%COMP%]{display:block}.overlay-text[_ngcontent-%COMP%]{position:absolute;top:0%;right:0%}.avatar[_ngcontent-%COMP%]{width:100px;height:100px;display:inline-block;vertical-align:top}']}),r})();var Q=m(2841),Ht=m(6697);function Ft(r,s){1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Title"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Director"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Release Year"),t.qZA(),t.qZA())}function qt(r,s){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&r){const e=s.$implicit;t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.director),t.xp6(2),t.Oqu(e.releaseYear)}}let kt=(()=>{class r{constructor(e,i,o){this.ngxLoader=e,this.QuibService=i,this.toastr=o,this.checked2=!0,this.RecommendedMovies=[]}ngOnInit(){this.sidebarSpacing="expanded",this.fgsType=M.aS.squareLoader,this.ngxLoader.start(),this.Getdisplay(),this.GetRecommendedMovies()}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}GetRecommendedMovies(){var e=this;return(0,C.Z)(function*(){e.ngxLoader.start(),(yield e.QuibService.GetRecommendedMovies()).subscribe({next:i=>{e.RecommendedMovies=i,e.toastr.showSuccess("Recommended Movies fetched successfully","Movie"),e.ngxLoader.stop()},error:i=>{e.toastr.showError("Failed to fetch Recommended Movies fetched","Movie"),e.ngxLoader.stop()},complete:()=>{}})})()}Getdisplay(){this.QuibService.Getdisplay().subscribe(e=>{this.checked=e.isVisible})}DisplayRecommendedMovies(){this.QuibService.DisplayRecommendedMovies(this.checked).subscribe(i=>{this.Getdisplay(),this.toastr.showSuccess("Recommended Movies list status changed successfully","Recommended")})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.LA),t.Y36(R.V),t.Y36(O.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-recommended-movies"]],decls:13,vars:8,consts:[[3,"toggleSidebar"],[1,"body","bcard",3,"ngClass"],[1,"card","col-sm-12",2,"height","100vh"],[1,"row","gutters","mt-2"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],[1,"txt-style"],[1,"text-right"],["onLabel","Hide\xa0R\xa0Movies","offLabel","Show\xa0R\xa0Movies",3,"ngModel","ngModelChange","click"],["id","customerTable","responsiveLayout","scroll","scrollHeight","70vh","columnResizeMode","expand","styleClass","p-datatable-striped",3,"value","paginator","rows","showCurrentPageReport","resizableColumns","responsive"],["pTemplate","header"],["pTemplate","body"]],template:function(e,i){1&e&&(t.TgZ(0,"app-header",0),t.NdJ("toggleSidebar",function(n){return i.onToggleSidebar(n)}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"p",5),t._uU(6,"All Recommended movies list !"),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",6),t.TgZ(9,"p-toggleButton",7),t.NdJ("ngModelChange",function(n){return i.checked=n})("click",function(){return i.DisplayRecommendedMovies()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"p-table",8),t.YNc(11,Ft,7,0,"ng-template",9),t.YNc(12,qt,7,3,"ng-template",10),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",i.sidebarSpacing),t.xp6(8),t.Q6J("ngModel",i.checked),t.xp6(1),t.Q6J("value",i.RecommendedMovies)("paginator",!0)("rows",20)("showCurrentPageReport",!0)("resizableColumns",!0)("responsive",!0))},directives:[I.G,v.mk,Q.CO,u.JJ,u.On,Ht.iA,z.jx],styles:[".txt-style[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:18px}"]}),r})();function Ut(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"textarea",11),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().tos=o}),t._uU(2,"            "),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.tos)}}const Bt=function(){return{width:"10em"}};function Qt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"p-toggleButton",12),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().checked2=o}),t.qZA()}if(2&r){const e=t.oxw();t.Akn(t.DdM(3,Bt)),t.Q6J("ngModel",e.checked2)}}function Lt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"textarea",13),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().tos=o}),t._uU(1,"            "),t.qZA(),t.TgZ(2,"div",3),t.TgZ(3,"div",7),t.TgZ(4,"div",8),t.TgZ(5,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelForm()}),t._uU(6," Cancel "),t.qZA(),t.TgZ(7,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitForm()}),t._uU(8," Submit "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("ngModel",e.tos)}}let Jt=(()=>{class r{constructor(e,i,o){this.ngxLoader=e,this.QuibService=i,this.toastr=o,this.checked2=!0}ngOnInit(){this.sidebarSpacing="expanded",this.fgsType=M.aS.squareLoader,this.ngxLoader.start(),this.getForm()}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getForm(){var e=this;return(0,C.Z)(function*(){e.ngxLoader.start(),(yield e.QuibService.GetTos()).subscribe({next:i=>{e.tos=JSON.parse(i.tosText).TOSText,console.log("Fetched Succesfully"),e.ngxLoader.stop()},error:i=>{console.log(i),console.log(i.error.message),e.toastr.showError("Failed to fetch TOS","TOS"),e.ngxLoader.stop()},complete:()=>{}})})()}cancelForm(){this.checked2=!0}submitForm(){var e=this;return(0,C.Z)(function*(){(yield e.QuibService.EditTos(e.tos)).subscribe({next:i=>{e.toastr.showSuccess("TOS Updated","TOS")},error:i=>{e.toastr.showError("TOS failed to update","TOS")},complete:()=>{e.cancelForm()}})})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.LA),t.Y36(R.V),t.Y36(O.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-tos"]],decls:15,vars:4,consts:[[3,"toggleSidebar"],[1,"body","bcard",3,"ngClass"],[1,"card","col-sm-12",2,"height","100vh"],[1,"row","gutters","mt-2"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],[1,"txt-style"],[4,"ngIf","ngIfElse"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12","mt-4"],[1,"text-right"],["onLabel","Edit",3,"ngModel","style","ngModelChange",4,"ngIf"],["elseBlock",""],["id","txt-style","readonly","","rows","12","cols","158",1,"txt-style",3,"ngModel","ngModelChange"],["onLabel","Edit",3,"ngModel","ngModelChange"],["id","TOS","name","TOS","rows","20","cols","20",3,"ngModel","ngModelChange"],["pButton","","type","button","id","reset","name","reset",1,"p-button-danger","mr-4",3,"click"],["pButton","","type","button","id","submit","name","submit",1,"p-button-success",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"app-header",0),t.NdJ("toggleSidebar",function(n){return i.onToggleSidebar(n)}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"p",5),t._uU(6,"Terms And Service of Quib.... !"),t.qZA(),t.qZA(),t.qZA(),t._UZ(7,"hr"),t.YNc(8,Ut,3,1,"div",6),t.TgZ(9,"div",3),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.YNc(12,Qt,1,4,"p-toggleButton",9),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,Lt,9,1,"ng-template",null,10,t.W1O),t.qZA(),t.qZA()),2&e){const o=t.MAs(14);t.xp6(1),t.Q6J("ngClass",i.sidebarSpacing),t.xp6(7),t.Q6J("ngIf",i.checked2)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",i.checked2)}},directives:[I.G,v.mk,v.O5,u.Fj,u.JJ,u.On,Q.CO,F.Hq],styles:[".txt-style[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:18px;border-style:none;border-color:Transparent;overflow:auto}"]}),r})();var K=m(2368),Wt=m(4297);function jt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"mat-slide-toggle",22),t.NdJ("change",function(o){const a=t.CHM(e).$implicit;return t.oxw().EditTooltipDisplay(a.buttonId,o)}),t.qZA(),t.qZA(),t.TgZ(3,"p-card",23),t._UZ(4,"p",24),t.TgZ(5,"button",25),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw().EditToolTips(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit,i=t.oxw();t.xp6(2),t.Q6J("color",i.color)("checked",!e.isDisabled)("disabled",i.disabled),t.xp6(1),t.s9C("header",e.buttonName),t.xp6(1),t.Q6J("innerHTML",e.tooltipText,t.oJD)}}const Dt=function(){return{width:"50vw",height:"50vh"}};function Nt(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"p",5),t._uU(3),t.qZA(),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",6),t.TgZ(6,"label",7),t._uU(7,"Heading"),t.qZA(),t.TgZ(8,"input",8),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.heading=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"label",9),t._uU(11,"Subject"),t.qZA(),t.TgZ(12,"input",10),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.subject=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"label",11),t._uU(15,"Greeting Line"),t.qZA(),t.TgZ(16,"input",12),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.greetLine=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"label",13),t._uU(19,"Content"),t.qZA(),t.TgZ(20,"textarea",14),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.content=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"label",15),t._uU(23,"Button Name"),t.qZA(),t.TgZ(24,"input",16),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.linkName=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(25,"div",6),t.TgZ(26,"label",17),t._uU(27,"Footer"),t.qZA(),t.TgZ(28,"input",18),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.footer=o})("change",function(){return t.CHM(e),t.oxw().enableSubmit()}),t.qZA(),t.qZA(),t.TgZ(29,"div",19),t.TgZ(30,"button",20),t.NdJ("click",function(){const n=t.CHM(e).index;return t.oxw().submitForm(n)}),t._uU(31," Submit "),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=s.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.emailType),t.xp6(5),t.Q6J("ngModel",e.heading),t.xp6(4),t.Q6J("ngModel",e.subject),t.xp6(4),t.Q6J("ngModel",e.greetLine),t.xp6(4),t.Q6J("ngModel",e.content),t.xp6(4),t.Q6J("ngModel",e.linkName),t.xp6(4),t.Q6J("ngModel",e.footer),t.xp6(2),t.Q6J("disabled",i.isDisabled)}}const Pt=[{path:"",component:$},{path:"avatar",component:$},{path:"recommended-movie",component:kt},{path:"tos",component:Jt},{path:"tooltips",component:(()=>{class r{constructor(e,i,o,n,a){this.ngxLoader=e,this.QuibService=i,this.toastr=o,this.fb=n,this.confirmationService=a,this.allTooltips=[],this.display=!1,this.color="primary",this.disabled=!1,this.checked=!0,this.TooltipsForm=this.fb.group({buttonId:["",[u.kI.required]],buttonName:["",[u.kI.required]],tooltipText:["",[u.kI.required]]})}ngOnInit(){this.sidebarSpacing="expanded",this.fgsType=M.aS.squareLoader,this.ngxLoader.start(),this.getTooltips(),this.GetTooltipDisplay()}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getTooltips(){var e=this;return(0,C.Z)(function*(){e.ngxLoader.start(),(yield e.QuibService.GetTooltips()).subscribe({next:i=>{e.allTooltips=i,e.ngxLoader.stop()},error:i=>{e.ngxLoader.stop()},complete:()=>{}})})()}onSubmit(){var e=this;return(0,C.Z)(function*(){(yield e.QuibService.EditTooltip(e.TooltipsForm.controls.buttonId.value,e.TooltipsForm.controls.tooltipText.value,e.TooltipsForm.controls.buttonName.value)).subscribe({next:i=>{e.toastr.showSuccess("Tooltip Updated","TOS")},error:i=>{e.toastr.showError("Tooltip failed to update","TOS")},complete:()=>{e.getTooltips(),e.display=!1}})})()}EditToolTips(e){this.display=!0,this.TooltipsForm.get("buttonName").setValue(e.buttonName),this.TooltipsForm.get("tooltipText").setValue(e.tooltipText),this.TooltipsForm.get("buttonId").setValue(e.buttonId)}GetTooltipDisplay(){this.QuibService.GetTooltipDisplay().subscribe(e=>{this.checked2=e.isVisible})}DisplayAllTooltips(){this.QuibService.DisplayTooltips(this.checked2).subscribe(i=>{this.GetTooltipDisplay(),this.toastr.showSuccess("Tooltip status changed successfully","Tooltips")})}EditTooltipDisplay(e,i){var o=this;return(0,C.Z)(function*(){const n=i.checked;yield o.QuibService.EditTooltipDisplay(e,!n).subscribe({next:a=>{console.log(a),n?o.toastr.showSuccess("Tooltip enabled","Tooltip"):o.toastr.showWarning("Tooltip disabled","Tooltip")},error:a=>{console.log(a),o.toastr.showError("There was a problem updating tooltip display","Error")},complete:()=>{}})})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.LA),t.Y36(R.V),t.Y36(O.$),t.Y36(u.qu),t.Y36(z.YP))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-tooltips"]],features:[t._Bn([z.YP])],decls:32,vars:9,consts:[[3,"toggleSidebar"],[1,"body","bcard",3,"ngClass"],[1,"row","gutters"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],[1,"txt-style"],[1,"text-right"],["onLabel","Hide\xa0Tooltips","offLabel","Show\xa0Tooltips",3,"ngModel","ngModelChange","click"],["class","col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 tooltipcontainer",4,"ngFor","ngForOf"],["header","Edit tooltips",3,"visible","modal","visibleChange"],[3,"formGroup"],[1,"h-100","mt-0"],[1,"card-body"],[1,"form-group"],["type","text","placeholder","heading","formControlName","buttonName",1,"form-control"],["type","text","placeholder","tooltip text","formControlName","tooltipText",1,"form-control"],[1,"row","gutters","mt-4"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12","mt-4"],["pButton","","type","button","id","submit","name","submit",1,"p-button-danger","mr-4",3,"click"],["pButton","","type","button","id","submit","name","submit",1,"p-button-success",3,"click"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12","tooltipcontainer"],[1,"text-right",2,"transform","translate(-1%,6vh)"],[3,"color","checked","disabled","change"],[3,"header"],["id","txt-style",1,"txt-style",3,"innerHTML"],["pButton","","type","button","label","Edit",1,"p-button-secondary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"app-header",0),t.NdJ("toggleSidebar",function(n){return i.onToggleSidebar(n)}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",2),t.TgZ(5,"div",4),t.TgZ(6,"p",5),t._uU(7,"A list of all the Tooltips!"),t.qZA(),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"div",6),t.TgZ(10,"p-toggleButton",7),t.NdJ("ngModelChange",function(n){return i.checked2=n})("click",function(){return i.DisplayAllTooltips()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(11,jt,6,5,"div",8),t.qZA(),t.qZA(),t.TgZ(12,"p-dialog",9),t.NdJ("visibleChange",function(n){return i.display=n}),t.TgZ(13,"form",10),t.TgZ(14,"div",2),t.TgZ(15,"div",3),t.TgZ(16,"div",11),t.TgZ(17,"div",12),t.TgZ(18,"div",2),t.TgZ(19,"div",4),t.TgZ(20,"div",13),t._UZ(21,"input",14),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"div",13),t._UZ(24,"input",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",16),t.TgZ(26,"div",17),t.TgZ(27,"div",6),t.TgZ(28,"button",18),t.NdJ("click",function(){return i.display=!1}),t._uU(29," Cancel "),t.qZA(),t.TgZ(30,"button",19),t.NdJ("click",function(){return i.onSubmit()}),t._uU(31," Submit "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",i.sidebarSpacing),t.xp6(9),t.Q6J("ngModel",i.checked2),t.xp6(1),t.Q6J("ngForOf",i.allTooltips),t.xp6(1),t.Akn(t.DdM(8,Dt)),t.Q6J("visible",i.display)("modal",!0),t.xp6(1),t.Q6J("formGroup",i.TooltipsForm))},directives:[I.G,v.mk,Q.CO,u.JJ,u.On,v.sg,K.Rr,Wt.Z,F.Hq,D.V,u._Y,u.JL,u.sg,u.Fj,u.u],styles:[".txt-style[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:18px}.tooltipcontainer[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin-top:5px}"]}),r})()},{path:"email",component:(()=>{class r{constructor(e,i,o){this.ngxLoader=e,this.QuibService=i,this.toastr=o,this.isDisabled=!0}ngOnInit(){this.sidebarSpacing="expanded",this.fgsType=M.aS.squareLoader,this.ngxLoader.start(),this.getForm()}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getForm(){var e=this;return(0,C.Z)(function*(){e.ngxLoader.start(),(yield e.QuibService.getAllEmailTemplates()).subscribe({next:i=>{e.allEmails=i,e.ngxLoader.stop(),e.isDisabled=!0},error:i=>{e.toastr.showError("Failed to fetch Emails","Email"),e.ngxLoader.stop()},complete:()=>{}})})()}enableSubmit(){this.isDisabled=!1}submitForm(e){var i=this;return(0,C.Z)(function*(){(yield i.QuibService.setEmailTemplate(i.allEmails[e])).subscribe({next:o=>{o&&i.toastr.showSuccess("Email Updated","Email"),i.getForm()},error:o=>{i.toastr.showError("Email failed to update","Email")},complete:()=>{}})})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(M.LA),t.Y36(R.V),t.Y36(O.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-email"]],decls:3,vars:2,consts:[[3,"toggleSidebar"],[1,"body","bcard",3,"ngClass"],["class","card col-12 px-5",4,"ngFor","ngForOf"],[1,"card","col-12","px-5"],[1,"row","mt-2","justify-content-center",2,"height","20px"],[1,"txt-style"],[1,"row","gutters","mt-2"],["for","formControlInput1",1,"form-label"],["type","text","id","formControlInput1","placeholder","Heading",1,"form-control",3,"ngModel","ngModelChange","change"],["for","formControlInput2",1,"form-label"],["type","text","id","formControlInput2","placeholder","Subject",1,"form-control",3,"ngModel","ngModelChange","change"],["for","formControlInput3",1,"form-label"],["type","text","id","formControlInput3","placeholder","Greeting Line",1,"form-control",3,"ngModel","ngModelChange","change"],["for","formControlTextarea1",1,"form-label"],["id","formControlTextarea1","rows","3","placeholder","Content",1,"form-control",3,"ngModel","ngModelChange","change"],["for","formControlInput4",1,"form-label"],["type","text","id","formControlInput4","placeholder","Button Name",1,"form-control",3,"ngModel","ngModelChange","change"],["for","formControlInput5",1,"form-label"],["type","text","id","formControlInput5","placeholder","Footer",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"row","gutters","my-4","justify-content-end"],["pButton","","type","button","id","submit","name","submit",1,"p-button-success",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"app-header",0),t.NdJ("toggleSidebar",function(n){return i.onToggleSidebar(n)}),t.qZA(),t.TgZ(1,"div",1),t.YNc(2,Nt,32,8,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",i.sidebarSpacing),t.xp6(1),t.Q6J("ngForOf",i.allEmails))},directives:[I.G,v.mk,v.sg,u.Fj,u.JJ,u.On,F.Hq],styles:[".txt-style[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:18px;border-style:none;border-color:Transparent;overflow:auto}"]}),r})()}];let Vt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[j.Bz.forChild(Pt)],j.Bz]}),r})();var Gt=m(5366);let Xt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[v.ez,Gt.m,Vt,K.rP,Rt]]}),r})()}}]);